<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link type="application/atom+xml" rel="alternate" href="https://jekyllrb.com/feed.xml" title="Jekyll • Simple, blog-aware, static sites" />
  <link type="application/atom+xml" rel="alternate" href="/feed/release.xml" title="Jekyll releases posts" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Jekyll’s master branch" href="https://github.com/jekyll/jekyll/commits/master.atom">
  <link rel="preload" href="/fonts/lato-v14-latin-300.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="/fonts/lato-v14-latin-700.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="/css/screen.css" as="style">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Upgrading from 2.x to 3.x | Jekyll • Simple, blog-aware, static sites</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Upgrading from 2.x to 3.x" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Upgrading from an older version of Jekyll? A few things have changed in Jekyll 3 that you’ll want to know about." />
<meta property="og:description" content="Upgrading from an older version of Jekyll? A few things have changed in Jekyll 3 that you’ll want to know about." />
<link rel="canonical" href="https://jekyllrb.com/docs/upgrading/2-to-3/" />
<meta property="og:url" content="https://jekyllrb.com/docs/upgrading/2-to-3/" />
<meta property="og:site_name" content="Jekyll • Simple, blog-aware, static sites" />
<meta property="og:image" content="https://jekyllrb.com/img/jekyll-og.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-25T10:22:38-08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://jekyllrb.com/img/jekyll-og.png" />
<meta property="twitter:title" content="Upgrading from 2.x to 3.x" />
<meta name="twitter:site" content="@jekyllrb" />
<meta name="google-site-verification" content="onQcXpAvtHBrUI5LlroHNE_FP0b2qvFyPq7VZw36iEY" />
<script type="application/ld+json">
{"headline":"Upgrading from 2.x to 3.x","dateModified":"2021-02-25T10:22:38-08:00","datePublished":"2021-02-25T10:22:38-08:00","description":"Upgrading from an older version of Jekyll? A few things have changed in Jekyll 3 that you’ll want to know about.","url":"https://jekyllrb.com/docs/upgrading/2-to-3/","mainEntityOfPage":{"@type":"WebPage","@id":"https://jekyllrb.com/docs/upgrading/2-to-3/"},"@type":"BlogPosting","image":"https://jekyllrb.com/img/jekyll-og.png","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://jekyllrb.com/img/logo-2x.png"}},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>
<body class="wrap"><header>
  <div class="flexbox">
    <div class="center-on-mobiles">
      <h1>
        <a href="/" class="logo">
          <span class="sr-only">Jekyll</span>
          <img src="/img/logo-2x.png" width="140" height="65" alt="Jekyll Logo">
        </a>
      </h1>
    </div>
    <nav class="main-nav hide-on-mobiles">
      <ul>
  <li><a href="/">Home</a></li>
  <li class="current"><a href="/docs/">Docs</a></li>
  <li><a href="/resources/">Resources</a></li>
  <li><a href="/showcase/">Showcase</a></li>
  <li><a href="/news/">News</a></li>
  </ul>
</nav>
    <div class="search hide-on-mobiles">
      <input type="text" id="docsearch-input" placeholder="Search the docs…">
</div>
    <div class="meta hide-on-mobiles">
      <ul>
        <li><a href="https://github.com/jekyll/jekyll/releases/tag/v4.2.0">v4.2.0</a></li>
        <li><a href="https://github.com/jekyll/jekyll">GitHub</a></li>
      </ul>
    </div>
  </div>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li><a href="/">Home</a></li>
    <li class="current" ><a href="/docs/">Docs</a></li>
    <li><a href="/resources/">Resources</a></li>
    <li><a href="/news/">News</a></li>
    <li><a href="https://github.com/jekyll/jekyll">GitHub</a></li>
</ul>
</nav>
</header>
<section class="docs">
  <div class="grid">
    <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the docs…</option>
    <optgroup label="Getting Started">
      <option value="/docs/">Quickstart</option>
      <option value="/docs/installation/">Installation</option>
      <option value="/docs/ruby-101/">Ruby 101</option>
      <option value="/docs/community/">Community</option>
      <option value="/docs/step-by-step/01-setup/">Step by Step Tutorial</option>
    </optgroup>
    <optgroup label="Build">
      <option value="/docs/usage/">Command Line Usage</option>
      <option value="/docs/configuration/">Configuration</option>
      <option value="/docs/rendering-process/">Rendering Process</option>
    </optgroup>
    <optgroup label="Content">
      <option value="/docs/pages/">Pages</option>
      <option value="/docs/posts/">Posts</option>
      <option value="/docs/front-matter/">Front Matter</option>
      <option value="/docs/collections/">Collections</option>
      <option value="/docs/datafiles/">Data Files</option>
      <option value="/docs/assets/">Assets</option>
      <option value="/docs/static-files/">Static Files</option>
    </optgroup>
    <optgroup label="Site Structure">
      <option value="/docs/structure/">Directory Structure</option>
      <option value="/docs/liquid/">Liquid</option>
      <option value="/docs/variables/">Variables</option>
      <option value="/docs/includes/">Includes</option>
      <option value="/docs/layouts/">Layouts</option>
      <option value="/docs/permalinks/">Permalinks</option>
      <option value="/docs/themes/">Themes</option>
      <option value="/docs/pagination/">Pagination</option>
    </optgroup>
    <optgroup label="Guides">
      <option value="/docs/plugins/">Plugins</option>
      <option value="/docs/migrations/">Blog Migrations</option>
      <option value="/docs/upgrading/">Upgrading</option>
      <option value="/docs/deployment/">Deployment</option>
    </optgroup>
    </select>
</div>
<div class="unit four-fifths">
      <article>
        <div class="improve right hide-on-mobiles">
          <a data-proofer-ignore href="https://github.com/jekyll/jekyll/edit/master/docs/_docs/upgrading/2-to-3.md"><i
             class="fa fa-pencil"></i> &nbsp;Improve this page</a>
        </div>
        <h1>Upgrading from 2.x to 3.x</h1>
        <p>Upgrading from an older version of Jekyll? A few things have changed in Jekyll 3
that you’ll want to know about.</p>

<p>Before we dive in, go ahead and fetch the latest version of Jekyll:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem update jekyll
</code></pre></div></div>

<p class="note warning">Since version <span class="version-badge" title="This feature is available starting version 3.2">3.2</span>
, Jekyll requires Ruby version &gt;= 2.1.</p>

<div class="note feature">
  <h5>Diving in</h5>
  <p>Want to get a new Jekyll site up and running quickly? Simply
   run <code>jekyll new SITENAME</code> to create a new folder with a bare bones
   Jekyll site.</p>
</div>

<h3 id="sitecollections-has-changed">site.collections has changed</h3>

<p>In 2.x, your iterations over <code class="language-plaintext highlighter-rouge">site.collections</code> yielded an array with the collection
label and the collection object as the first and second items, respectively. In 3.x,
this complication has been removed and iterations now yield simply the collection object.
A simple conversion must be made in your templates:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">collection[0]</code> becomes <code class="language-plaintext highlighter-rouge">collection.label</code></li>
  <li><code class="language-plaintext highlighter-rouge">collection[1]</code> becomes <code class="language-plaintext highlighter-rouge">collection</code></li>
</ul>

<p>When iterating over <code class="language-plaintext highlighter-rouge">site.collections</code>, ensure the above conversions are made.</p>

<p>For <code class="language-plaintext highlighter-rouge">site.collections.myCollection</code> in Jekyll 2, you now do:</p>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="nv">myCollection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">site</span><span class="p">.</span><span class="nv">collections</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">where</span><span class="p">:</span><span class="w"> </span><span class="s2">"label"</span><span class="p">,</span><span class="w"> </span><span class="s2">"myCollection"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">first</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div></div>

<p>This is a bit cumbersome at first, but is easier than a big <code class="language-plaintext highlighter-rouge">for</code> loop.</p>

<h3 id="textile-support">Textile support</h3>

<p>We dropped native support for Textile, from now on you have to install our  <a href="https://github.com/jekyll/jekyll-textile-converter">jekyll-textile-converter</a> plugin to work with Textile files.</p>

<h3 id="dropped-dependencies">Dropped dependencies</h3>

<p>We dropped a number of dependencies the Core Team felt were optional. As such, in 3.0, they must be explicitly installed and included if you use any of the features. They are:</p>

<ul>
  <li>jekyll-paginate – Jekyll’s pagination solution from days past</li>
  <li>jekyll-coffeescript – processing of CoffeeScript</li>
  <li>jekyll-gist – the <code class="language-plaintext highlighter-rouge">gist</code> Liquid tag</li>
  <li>pygments.rb – the Pygments highlighter</li>
  <li>redcarpet – the Markdown processor</li>
  <li>toml – an alternative to YAML for configuration files</li>
  <li>classifier-reborn – for <code class="language-plaintext highlighter-rouge">site.related_posts</code></li>
</ul>

<h3 id="future-posts">Future posts</h3>

<p>A seeming feature regression in 2.x, the <code class="language-plaintext highlighter-rouge">--future</code> flag was automatically <em>enabled</em>.
The future flag allows post authors to give the post a date in the future and to have
it excluded from the build until the system time is equal or after the post time.
In Jekyll 3, this has been corrected. <strong>Now, <code class="language-plaintext highlighter-rouge">--future</code> is disabled by default.</strong>
This means you will need to include <code class="language-plaintext highlighter-rouge">--future</code> if you want your future-dated posts to
generate when running <code class="language-plaintext highlighter-rouge">jekyll build</code> or <code class="language-plaintext highlighter-rouge">jekyll serve</code>.</p>

<div class="note info">
  <h5>Future Posts on GitHub Pages</h5>
  <p>
    An exception to the above rule are GitHub Pages sites, where the <code>--future</code> flag remains <em>enabled</em>
    by default to maintain historical consistency for those sites.
  </p>
</div>

<h3 id="layout-metadata">Layout metadata</h3>

<p>Introducing: <code class="language-plaintext highlighter-rouge">layout</code>. In Jekyll 2 and below, any metadata in the layout was merged onto
the <code class="language-plaintext highlighter-rouge">page</code> variable in Liquid. This caused a lot of confusion in the way the data was
merged and some unexpected behaviour. In Jekyll 3, all layout data is accessible via <code class="language-plaintext highlighter-rouge">layout</code>
in Liquid. For example, if your layout has <code class="language-plaintext highlighter-rouge">class: my-layout</code> in its front matter,
then the layout can access that via <code class="language-plaintext highlighter-rouge">{{ layout.class }}</code>.</p>

<h3 id="syntax-highlighter-changed">Syntax highlighter changed</h3>

<p>For the first time, the default syntax highlighter has changed for the
<code class="language-plaintext highlighter-rouge">highlight</code> tag and for backtick code blocks. Instead of <a href="https://github.com/tmm1/pygments.rb">Pygments.rb</a>,
it’s now <a href="http://rouge.jneen.net/">Rouge</a>. If you were using the <code class="language-plaintext highlighter-rouge">highlight</code> tag with certain
options, such as <code class="language-plaintext highlighter-rouge">hl_lines</code>, they may not be available when using Rouge. To
go back to using Pygments, set <code class="language-plaintext highlighter-rouge">highlighter: pygments</code> in your
<code class="language-plaintext highlighter-rouge">_config.yml</code> file and run <code class="language-plaintext highlighter-rouge">gem install pygments.rb</code> or add
<code class="language-plaintext highlighter-rouge">gem 'pygments.rb'</code> to your project’s <code class="language-plaintext highlighter-rouge">Gemfile</code>.</p>

<h3 id="relative-permalink-support-removed">Relative Permalink support removed</h3>

<p>In Jekyll 3 and above, relative permalinks have been deprecated. If you
created your site using Jekyll 2 and below, you may receive the following
error when trying to <strong>serve</strong> or <strong>build</strong>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Since v3.0, permalinks for pages in subfolders must be relative to the site
source directory, not the parent directory. Check
https://jekyllrb.com/docs/upgrading/ for more info.
</code></pre></div></div>

<p>This can be fixed by removing the following line from your <code class="language-plaintext highlighter-rouge">_config.yml</code> file:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">relative_permalinks</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<h3 id="permalinks-no-longer-automatically-add-a-trailing-slash">Permalinks no longer automatically add a trailing slash</h3>

<p>In Jekyll 2, any URL constructed from the <code class="language-plaintext highlighter-rouge">permalink:</code> field had a trailing slash (<code class="language-plaintext highlighter-rouge">/</code>) added to it automatically. Jekyll 3 no longer adds a trailing slash automatically to <code class="language-plaintext highlighter-rouge">permalink:</code> URLs. This can potentially result in old links to pages returning a 404 error. For example, suppose a page previously contained the YAML <code class="language-plaintext highlighter-rouge">permalink: /:year-:month-:day-:title</code> that resulted in the URL <code class="language-plaintext highlighter-rouge">example.com/2016-02-01-test/</code> (notice the trailing slash), Jekyll internally generates a folder named <code class="language-plaintext highlighter-rouge">2016-02-01-test</code>. In Jekyll 3, the same <code class="language-plaintext highlighter-rouge">permalink:</code> generate the file <code class="language-plaintext highlighter-rouge">2016-02-01-test.html</code> and the URL for the same page will be <code class="language-plaintext highlighter-rouge">example.com/2016-02-01-test</code>, and consequently any links to the old URL will result in a 404 error. In order to maintain the same URLs and avoid this problem, a trailing slash should be added to the <code class="language-plaintext highlighter-rouge">permalink:</code> field, for example <code class="language-plaintext highlighter-rouge">permalink: /:year-:month-:day-:title/</code>.</p>

<h3 id="all-my-posts-are-gone-whered-they-go">All my posts are gone! Where’d they go!</h3>

<p>Try adding <code class="language-plaintext highlighter-rouge">future: true</code> to your <code class="language-plaintext highlighter-rouge">_config.yml</code> file. Are they showing up now? If they are, then you were ensnared by an issue with the way Ruby parses times. Each of your posts is being read in a different timezone than you might expect and, when compared to the computer’s current time, is “in the future.” The fix for this is to add <a href="https://en.wikipedia.org/wiki/List_of_UTC_time_offsets">a timezone offset</a> to each post (and make sure you remove <code class="language-plaintext highlighter-rouge">future: true</code> from your <code class="language-plaintext highlighter-rouge">_config.yml</code> file). If you’re writing from California, for example, you would change this:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2016-02-06 19:32:10</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>to this (note the offset):</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2016-02-06 19:32:10 -0800</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="my-categories-have-stopped-working">My categories have stopped working!</h3>

<p>If you organized your categories as <code class="language-plaintext highlighter-rouge">/_posts/code/2008-12-24-closures.md</code>, you will need to restructure your directories to put the categories <em>above</em> the <code class="language-plaintext highlighter-rouge">_posts</code> directories, as follows: <code class="language-plaintext highlighter-rouge">/code/_posts/2008-12-24-closures.md</code>.</p>

<p><em>Did we miss something? Please click “Improve this page” above and add a section. Thanks!</em></p>

      </article>
    </div>
    <div class="unit one-fifth hide-on-mobiles">
  <aside>
    <h4>Getting Started</h4>
      <ul>
        <li><a href="/docs/">Quickstart</a></li>
        <li><a href="/docs/installation/">Installation</a></li>
        <li><a href="/docs/ruby-101/">Ruby 101</a></li>
        <li><a href="/docs/community/">Community</a></li>
        <li><a href="/docs/step-by-step/01-setup/">Step by Step Tutorial</a></li>
      </ul>
    <h4>Build</h4>
      <ul>
        <li><a href="/docs/usage/">Command Line Usage</a></li>
        <li><a href="/docs/configuration/">Configuration</a></li>
        <li><a href="/docs/rendering-process/">Rendering Process</a></li>
      </ul>
    <h4>Content</h4>
      <ul>
        <li><a href="/docs/pages/">Pages</a></li>
        <li><a href="/docs/posts/">Posts</a></li>
        <li><a href="/docs/front-matter/">Front Matter</a></li>
        <li><a href="/docs/collections/">Collections</a></li>
        <li><a href="/docs/datafiles/">Data Files</a></li>
        <li><a href="/docs/assets/">Assets</a></li>
        <li><a href="/docs/static-files/">Static Files</a></li>
      </ul>
    <h4>Site Structure</h4>
      <ul>
        <li><a href="/docs/structure/">Directory Structure</a></li>
        <li><a href="/docs/liquid/">Liquid</a></li>
        <li><a href="/docs/variables/">Variables</a></li>
        <li><a href="/docs/includes/">Includes</a></li>
        <li><a href="/docs/layouts/">Layouts</a></li>
        <li><a href="/docs/permalinks/">Permalinks</a></li>
        <li><a href="/docs/themes/">Themes</a></li>
        <li><a href="/docs/pagination/">Pagination</a></li>
      </ul>
    <h4>Guides</h4>
      <ul>
        <li><a href="/docs/plugins/">Plugins</a></li>
        <li><a href="/docs/migrations/">Blog Migrations</a></li>
        <li><a href="/docs/upgrading/">Upgrading</a></li>
        <li><a href="/docs/deployment/">Deployment</a></li>
      </ul>
    </aside>
</div>
<div class="clear"></div>
  </div>
</section>
<footer>
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
      <p>Jekyll is lovingly maintained by the <a href="/team/">core team</a> of volunteers. </p>
      <p>The contents of this website are <br />&copy;&nbsp;2021 under the terms of the <a href="https://github.com/jekyll/jekyll/blob/master/LICENSE">MIT&nbsp;License</a>.</p>
    </div>
    <div class="unit two-thirds align-right center-on-mobiles">
      <p>
        Proudly hosted by
        <a href="https://github.com">
          <img src="/img/footer-logo.png" width="100" height="30" alt="GitHub • Social coding">
        </a>
      </p>
    </div>
    <div class="unit two-thirds align-right center-on-mobiles">
      <p>
        Jekyll is funded thanks to its
        <a href="https://github.com/jekyll/jekyll#sponsors">
          sponsors!
        </a>
      </p>
    </div>
  </div>
</footer>
<script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>
<!-- Google Analytics (https://www.google.com/analytics) -->
  <script>
    !function(j,e,k,y,l,L){j.GoogleAnalyticsObject=y,j[y]||(j[y]=function(){
    (j[y].q=j[y].q||[]).push(arguments)}),j[y].l=+new Date,l=e.createElement(k),
    L=e.getElementsByTagName(k)[0],l.src='https://www.google-analytics.com/analytics.js',
    L.parentNode.insertBefore(l,L)}(window,document,'script','ga');

    ga('create', 'UA-50755011-1', 'jekyllrb.com');
    ga('send', 'pageview');
  </script>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script> docsearch({
apiKey: '50fe39c839958dfad797000f33e2ec17',
indexName: 'jekyllrb',
inputSelector: '#docsearch-input',
enhancedSearchInput: true,
debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
